---
title: "Bioinformatics pipeline summary"
subtitle: "Where we see the pipeline processes"
author: Adrien Taudi√®re
date: last-modified
format:
  html:
    theme: [custom.scss]
    css: "../assets/styles.css"
    toc: true
    toc-location: left
    toc-title: " "
    #number-sections: true
    smooth-scroll: true
    title-block-banner: true
    logo: "../assets/logo.png"
    github-repo: "https://github.com/adrientaudiere/bioinfo.starter"
    primary-color: "#c93312"
    secondary-color: "#2e7891"
    grey-bg-color: "#e5d7b1"
    self-contained: true
    link-external-icon: true
    # include-in-header:
    include-after-body: "../assets/footer.html"
    template-partials: "../assets/title-block.html" 
    code-fold: true
    code-summary: "Code"     
    # embed-resources: true
# bibliography: bibliography.bib
# link-citations: true
---

# Summary of the bioinformatic pipeline

```{r}
library(knitr)
library(targets)
library(MiscMetabar)
```

```{r Visualise target plan, out.width='80%', error = TRUE, message=FALSE, warning=FALSE}
tar_visnetwork(script=here::here("_targets.R"))
```


## Load phyloseq object from targets store

```{r, error = TRUE}
#tar_load()
```

<hr/>

The {targets} package is at the core of this project. Please read the intro of the [user manual](https://books.ropensci.org/targets/) if you don't know {targets}.

::: {.cell .page-columns .page-full .column-screen .grey-section}
The {targets} package store ... *targets* in a folder and can load (`tar_load()`) and read (`tar_read`) object from this folder.
::: 

## Sample data 

```{r}
DT::datatable(data_fungi@sam_data)
```


## Session Information


::: {.column-margin}

Session information are detailed below. More information about the machine, the system, as well as python and R packages, are available in the file `data_final/information_run.txt`.  

:::




<button type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" class="button-collapse">Session Information</button>


:::: {#collapseOne .accordion-collapse .collapse}
<div>

```{r}
sessionInfo()
```

```{r, include=FALSE, eval=FALSE}
information_report <- list(
  "date" = Sys.Date(), 
  "platform_info" = sessioninfo::platform_info(),
  "external_info" = sessioninfo::external_info(),
  "session_info" = sessioninfo::session_info(),
  "env_info" = Sys.getenv(),
  "system_locale" = Sys.getlocale(),
  "machine_info" = .Machine,
  "conda_info" = system("export PATH='/home/adrien/miniforge3/bin:$PATH'; conda list -n cutadaptenv"),
  "vsearch_version" = system2("vsearch", "--version", stdout = TRUE)
  )

capture.output(information_report, file="data_final/information_run.txt")

```
</div>
::::
